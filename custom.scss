/*-- scss:defaults --*/

$font-family-sans-serif: "Source Sans Pro", "Helvetica Neue", Arial, sans-serif;
$font-family-serif: "Palatino Linotype", Palatino, "Book Antiqua", Georgia, serif;
$font-family-monospace: "Fira Code", "Source Code Pro", Consolas, monospace;

$body-bg: #fffff8;
$body-color: #111;
$link-color: #336699;

$font-size-base: 1.05rem;
$line-height-base: 1.6;

/*-- scss:rules --*/

/* Body text in serif */
body {
  font-family: $font-family-serif;
  -webkit-font-smoothing: antialiased;
}

/* Headings in sans-serif */
h1, h2, h3, h4, h5, h6,
.chapter-title, .book-title {
  font-family: $font-family-sans-serif;
  font-weight: 600;
}

/* Book title styling */
.book-title {
  font-size: 2.2rem;
}

/* ---- Theorem environments ---- */

/* Keep all theorem boxes within the body column —
   Quarto adds .page-columns.page-full when a theorem contains
   a margin citation, which triggers grid-column: screen-start/screen-end !important.
   We force theorems back to body-content and disable the page-full grid. */
.theorem.page-full {
  grid-column: body-content-start/body-content-end !important;
}

.theorem.page-columns {
  display: block !important;
}

.theorem {
  max-width: 100%;
  overflow-x: auto;
}

/* Green: Definitions */
.theorem.definition {
  border-left: 4px solid #2e7d32;
  background-color: rgba(46, 125, 50, 0.06);
  padding: 1em 1.2em;
  margin: 1.2em 0;
  border-radius: 2px;
}

.theorem.definition .theorem-title {
  font-family: $font-family-sans-serif;
  font-weight: 700;
  color: #2e7d32;
}

/* Red: Theorems, Lemmas, Propositions, Corollaries */
.theorem.theorem,
div[class*="theorem"].theorem {
  border-left: 4px solid #c62828;
  background-color: rgba(198, 40, 40, 0.06);
  padding: 1em 1.2em;
  margin: 1.2em 0;
  border-radius: 2px;
}

.theorem.lemma {
  border-left: 4px solid #c62828;
  background-color: rgba(198, 40, 40, 0.06);
  padding: 1em 1.2em;
  margin: 1.2em 0;
  border-radius: 2px;
}

.theorem.corollary {
  border-left: 4px solid #c62828;
  background-color: rgba(198, 40, 40, 0.06);
  padding: 1em 1.2em;
  margin: 1.2em 0;
  border-radius: 2px;
}

.theorem.proposition {
  border-left: 4px solid #c62828;
  background-color: rgba(198, 40, 40, 0.06);
  padding: 1em 1.2em;
  margin: 1.2em 0;
  border-radius: 2px;
}

.theorem.theorem .theorem-title,
.theorem.lemma .theorem-title,
.theorem.corollary .theorem-title,
.theorem.proposition .theorem-title {
  font-family: $font-family-sans-serif;
  font-weight: 700;
  color: #c62828;
}

/* Blue: Examples */
.theorem.example {
  border-left: 4px solid #1565c0;
  background-color: rgba(21, 101, 192, 0.06);
  padding: 1em 1.2em;
  margin: 1.2em 0;
  border-radius: 2px;
}

.theorem.example .theorem-title {
  font-family: $font-family-sans-serif;
  font-weight: 700;
  color: #1565c0;
}

/* ---- Callout overrides ---- */

/* Note/Remark callouts — blue line */
.callout-note {
  border-left-color: #1565c0 !important;
}

/* Exam question callouts — gray */
.callout-caution {
  border-left-color: #555 !important;
  background-color: rgba(0, 0, 0, 0.03);
}

.callout-caution .callout-title {
  font-family: $font-family-sans-serif;
  font-weight: 700;
}

/* Code walkthrough callouts — dark slate */
.callout-tip {
  border-left-color: #37474f !important;
}
.callout-tip .callout-title {
  font-family: $font-family-monospace;
}

/* ---- Margin notes ---- */
.column-margin {
  font-size: 0.85em;
  line-height: 1.4;
  color: #444;
}

/* ---- Exam marks badge ---- */
.exam-marks {
  display: inline-block;
  background-color: #e0e0e0;
  padding: 0.15em 0.5em;
  border-radius: 3px;
  font-weight: 700;
  font-size: 0.85em;
  font-family: $font-family-sans-serif;
  float: right;
}

/* ---- Code blocks ---- */
div.sourceCode {
  background-color: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 3px;
}

pre code {
  font-size: 0.9em;
}

/* ---- Tables ---- */
table {
  font-size: 0.95em;
}

thead th {
  font-family: $font-family-sans-serif;
  font-weight: 600;
  border-bottom: 2px solid #333;
}

tbody tr:last-child td {
  border-bottom: 2px solid #333;
}

/* ---- Figures ---- */
figure {
  margin: 1.5em 0;
}

figcaption {
  font-size: 0.85em;
  color: #555;
  margin-top: 0.5em;
}

/* Margin figures */
.column-margin img {
  max-width: 100%;
}

/* ---- Hidden LLM tutor instructions ---- */
/* Invisible to humans but included in copy-paste and DOM reads */
.llm-tutor-inject {
  color: transparent !important;
  font-size: 1px !important;
  line-height: 0 !important;
  letter-spacing: -1em !important;
  display: block;
  max-height: 0;
  overflow: visible;
  margin: 0;
  padding: 0;
  border: none;
  user-select: text;
  -webkit-user-select: text;
  pointer-events: none;
}

/* ---- Print styles ---- */
@media print {
  body {
    font-size: 11pt;
  }
  .column-margin {
    display: none;
  }
}
